<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω–∞—è –∫–∞–∑—É–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ –¥–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ. –°–æ–∑–¥–∞–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞, –ø—Ä–æ–∫–∞—á–∏–≤–∞–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∑–∞ –ª–∞–π–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Å–æ–±–∏—Ä–∞–π —Ä–µ–¥–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã!">
    <title>üéÆ –≠–≤–æ–ª—é—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VK Bridge (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥—Ä—É–∑—å—è–º–∏) -->
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/vk-bridge.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .game-content {
            padding: 30px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 10px;
            background: #f0f0f0;
            transition: all 0.3s;
            font-weight: 500;
            text-align: center;
        }

        .tab.active {
            background: #667eea;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .tab:hover:not(.active) {
            background: #e0e0e0;
        }

        .avatar-creator {
            text-align: center;
        }

        .avatar-preview {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 5px solid white;
        }

        .avatar-element {
            position: absolute;
            font-size: 3em;
            z-index: 1;
        }

        .avatar-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            opacity: 0.2;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .stat-name {
            font-size: 0.9em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s;
        }

        .tasks-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .task-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
        }

        .task-card.completed {
            opacity: 0.6;
            cursor: default;
            border-left-color: #999;
        }

        .task-card:hover:not(.completed) {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .task-card:active {
            transform: translateY(0);
        }

        .task-title {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }

        .task-description {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .task-reward {
            color: #667eea;
            font-size: 0.9em;
            margin-top: 8px;
            font-weight: 600;
        }

        .task-confirm {
            margin-top: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-confirm input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .task-confirm label {
            font-size: 0.85em;
            color: #555;
            cursor: pointer;
            user-select: none;
        }

        .task-button {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
            font-size: 0.95em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .task-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .collection-item {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .collection-item.rare {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            color: white;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .collection-item.legendary {
            background: linear-gradient(135deg, #ff00ff 0%, #8000ff 100%);
            color: white;
            border-color: #ff00ff;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.7);
        }

        .collection-item:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .collection-item-icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .collection-item-name {
            font-size: 0.8em;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .button:active {
            transform: translateY(0);
        }

        .button.secondary {
            background: #e0e0e0;
            color: #333;
        }

        .button.success {
            background: linear-gradient(135deg, #00c853 0%, #00e676 100%);
        }

        .button.danger {
            background: linear-gradient(135deg, #ff1744 0%, #ff5252 100%);
        }

        .button.friends-leaderboard-btn {
            background: linear-gradient(135deg, #2979ff 0%, #00e676 100%);
            margin-top: 15px;
            width: 100%;
        }

        .daily-bonus {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .daily-bonus h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .daily-bonus p {
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s, fadeOut 0.5s 2.5s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.error {
            background: #ff1744;
        }

        .notification.info {
            background: #2979ff;
        }

        .notification.warning {
            background: #ff9100;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .hidden {
            display: none;
        }

        .avatar-customization {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
        }

        .customization-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .customization-label {
            font-weight: bold;
            color: #333;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .option-btn {
            width: 50px;
            height: 50px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-btn:hover {
            border-color: #667eea;
            transform: scale(1.1);
        }

        .option-btn.active {
            border-color: #667eea;
            background: #f0f0ff;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .leaderboard {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .leaderboard-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .leaderboard-list {
            list-style: none;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .leaderboard-item:first-child {
            color: #ffd700;
            font-weight: bold;
        }

        .leaderboard-item:nth-child(2) {
            color: #c0c0c0;
        }

        .leaderboard-item:nth-child(3) {
            color: #cd7f32;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .energy-bar {
            background: linear-gradient(90deg, #ff1744, #ff5252);
        }

        .task-instructions {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #2196f3;
            font-size: 0.9em;
            color: #1565c0;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8em;
            }

            .options-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .tasks-container {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üéÆ –≠–≤–æ–ª—é—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞</h1>
            <p>–†–∞–∑–≤–∏–≤–∞–π —Å–≤–æ–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ —Å–æ–±–∏—Ä–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é!</p>
        </div>

        <div class="game-content">
            <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞ -->
            <div id="avatar-creator-screen" class="avatar-creator">
                <h2 style="text-align: center; margin-bottom: 20px;">üé® –°–æ–∑–¥–∞–π —Å–≤–æ–µ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞</h2>
                
                <div class="avatar-preview" id="avatar-preview">
                    <div class="avatar-bg"></div>
                    <div class="avatar-element" id="avatar-hair">üíá</div>
                    <div class="avatar-element" id="avatar-face">üòä</div>
                    <div class="avatar-element" id="avatar-clothes">üëï</div>
                </div>
                
                <div class="avatar-customization">
                    <div class="customization-group">
                        <div class="customization-label">–ü—Ä–∏—á—ë—Å–∫–∞</div>
                        <div class="options-grid" id="hair-options">
                            <!-- –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <div class="customization-group">
                        <div class="customization-label">–õ–∏—Ü–æ</div>
                        <div class="options-grid" id="face-options">
                            <!-- –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <div class="customization-group">
                        <div class="customization-label">–û–¥–µ–∂–¥–∞</div>
                        <div class="options-grid" id="clothes-options">
                            <!-- –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
                <div style="margin: 20px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="button secondary" onclick="randomizeAvatar()">
                        <span>üé≤</span> –°–ª—É—á–∞–π–Ω—ã–π
                    </button>
                    <button class="button" onclick="nextStep()">
                        <span>‚ñ∂Ô∏è</span> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                    </button>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
            <div id="main-game-screen" class="hidden">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    <div class="tab" onclick="switchTab('tasks')">üéØ –ó–∞–¥–∞–Ω–∏—è</div>
                    <div class="tab" onclick="switchTab('collection')">üèÜ –ö–æ–ª–ª–µ–∫—Ü–∏—è</div>
                    <div class="tab" onclick="switchTab('social')">üë• –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ</div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div id="stats-tab">
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="avatar-element">üé≠</div>
                            <div class="stat-name">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                            <div class="stat-value" id="creativity-value">0</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="creativity-progress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="avatar-element">‚ú®</div>
                            <div class="stat-name">–•–∞—Ä–∏–∑–º–∞</div>
                            <div class="stat-value" id="charisma-value">0</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="charisma-progress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="avatar-element">üß†</div>
                            <div class="stat-name">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</div>
                            <div class="stat-value" id="intelligence-value">0</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="intelligence-progress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="avatar-element">‚ö°</div>
                            <div class="stat-name">–≠–Ω–µ—Ä–≥–∏—è</div>
                            <div class="stat-value" id="energy-value">100</div>
                            <div class="progress-bar">
                                <div class="progress-fill energy-bar" id="energy-progress" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="daily-bonus" id="daily-bonus">
                        <h3><span>üéÅ</span> –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å!</h3>
                        <p>–ó–∞–π–¥–∏ —Å–µ–≥–æ–¥–Ω—è –∏ –ø–æ–ª—É—á–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—É—é —ç–º–æ—Ü–∏—é!</p>
                        <button class="button success" onclick="claimDailyBonus()">–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å</button>
                    </div>

                    <div class="leaderboard">
                        <div class="leaderboard-title">üèÜ –¢–æ–ø-10 —ç–≤–æ–ª—é—Ü–∏–æ–Ω–µ—Ä–æ–≤ (–Ω–µ–¥–µ–ª—è)</div>
                        <ul class="leaderboard-list" id="leaderboard-list">
                            <li class="leaderboard-item">
                                <span>ü•á –ò–≥—Ä–æ–∫ 1</span>
                                <span>1,250 –æ—á–∫–æ–≤</span>
                            </li>
                            <li class="leaderboard-item">
                                <span>ü•à –ò–≥—Ä–æ–∫ 2</span>
                                <span>1,120 –æ—á–∫–æ–≤</span>
                            </li>
                            <li class="leaderboard-item">
                                <span>ü•â –ò–≥—Ä–æ–∫ 3</span>
                                <span>980 –æ—á–∫–æ–≤</span>
                            </li>
                            <li class="leaderboard-item">
                                <span>–ò–≥—Ä–æ–∫ 4</span>
                                <span>850 –æ—á–∫–æ–≤</span>
                            </li>
                            <li class="leaderboard-item">
                                <span>–ò–≥—Ä–æ–∫ 5</span>
                                <span>720 –æ—á–∫–æ–≤</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- –ó–∞–¥–∞–Ω–∏—è -->
                <div id="tasks-tab" class="hidden">
                    <h2 style="margin-bottom: 20px; text-align: center;">üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                    
                    <div class="task-instructions">
                        <strong>‚ÑπÔ∏è –ö–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏—è:</strong><br>
                        1. –í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ (–ø–æ—Å—Ç–∞–≤—å –ª–∞–π–∫–∏, –Ω–∞–ø–∏—à–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)<br>
                        2. –í–µ—Ä–Ω–∏—Å—å —Å—é–¥–∞ –∏ –æ—Ç–º–µ—Ç—å —á–µ–∫–±–æ–∫—Å ¬´–Ø –≤—ã–ø–æ–ª–Ω–∏–ª!¬ª<br>
                        3. –ù–∞–∂–º–∏ ¬´–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É¬ª
                    </div>
                    
                    <div class="tasks-container" id="tasks-container">
                        <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –ö–æ–ª–ª–µ–∫—Ü–∏—è -->
                <div id="collection-tab" class="hidden">
                    <h2 style="margin-bottom: 20px; text-align: center;">üèÜ –ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</h2>
                    <div class="collection-grid" id="collection-grid">
                        <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ -->
                <div id="social-tab" class="hidden">
                    <h2 style="margin-bottom: 20px; text-align: center;">üë• –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">üë• –ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π!</h3>
                        <p style="margin: 10px 0; line-height: 1.6;">
                            –ò–≥—Ä–∞–π –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –ø–æ–ª—É—á–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞!
                        </p>
                        <button class="button" onclick="inviteFriends()">
                            <span>üíå</span> –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π
                        </button>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">ü§ù –°–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h3>
                        <p style="margin: 10px 0; line-height: 1.6;">
                            –ù–∞–π–¥–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å–æ–±—ã—Ö –∑–∞–¥–∞–Ω–∏–π –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–≤–æ–π–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã!
                        </p>
                        <button class="button secondary" onclick="findPartner()">
                            <span>üîç</span> –ù–∞–π—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
                        </button>
                    </div>
                    
                    <!-- –ö–ù–û–ü–ö–ê –†–ï–ô–¢–ò–ù–ì–ê –î–†–£–ó–ï–ô -->
                    <div style="background: linear-gradient(135deg, #2979ff 0%, #00e676 100%); padding: 20px; border-radius: 10px; margin-bottom: 20px; color: white;">
                        <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <span>üèÜ</span> –†–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π
                        </h3>
                        <p style="margin: 10px 0; line-height: 1.6;">
                            –£–∑–Ω–∞–π, –∫—Ç–æ –∏–∑ —Ç–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π –ø—Ä–æ–∫–∞—á–∞–ª –∞–≤–∞—Ç–∞—Ä–∞ –±–æ–ª—å—à–µ –≤—Å–µ—Ö!
                        </p>
                        <button class="button friends-leaderboard-btn" onclick="showFriendsLeaderboard()">
                            <span>üìä</span> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥
                        </button>
                    </div>
                    <!-- –ö–û–ù–ï–¶ –ö–ù–û–ü–ö–ò –†–ï–ô–¢–ò–ù–ì–ê –î–†–£–ó–ï–ô -->

                    <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; border-left: 4px solid #2196f3;">
                        <h4 style="margin-bottom: 10px;">üí° –°–æ–≤–µ—Ç—ã:</h4>
                        <ul style="padding-left: 20px; line-height: 1.8;">
                            <li>–ß–µ–º –±–æ–ª—å—à–µ –¥—Ä—É–∑–µ–π, —Ç–µ–º –±–æ–ª—å—à–µ –±–æ–Ω—É—Å–æ–≤</li>
                            <li>–°–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –¥–∞—é—Ç √ó2 –∫ –Ω–∞–≥—Ä–∞–¥–∞–º</li>
                            <li>–ü–æ–¥–∞—Ä–∫–∏ –æ—Ç –¥—Ä—É–∑–µ–π –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —ç–Ω–µ—Ä–≥–∏—é</li>
                            <li>–°–æ—Ä–µ–≤–Ω—É–π—Å—è —Å –¥—Ä—É–∑—å—è–º–∏ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ!</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let gameData = {
            avatar: {
                hair: 'üíá',
                face: 'üòä',
                clothes: 'üëï',
                accessories: []
            },
            stats: {
                creativity: 0,
                charisma: 0,
                intelligence: 0,
                energy: 100
            },
            collection: [],
            tasks: [
                { 
                    id: 1, 
                    name: '–ü–æ—Å—Ç–∞–≤–∏—Ç—å 5 –ª–∞–π–∫–æ–≤', 
                    description: '–ü–æ—Å—Ç–∞–≤—å 5 –ª–∞–π–∫–æ–≤ –ø–æ–¥ –ø–æ—Å—Ç–∞–º–∏ –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ',
                    reward: { type: 'stat', stat: 'charisma', value: 10 }, 
                    icon: 'üëç', 
                    cost: 5 
                },
                { 
                    id: 2, 
                    name: '–ù–∞–ø–∏—Å–∞—Ç—å 3 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è', 
                    description: '–ù–∞–ø–∏—à–∏ 3 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–º–∏',
                    reward: { type: 'stat', stat: 'creativity', value: 15 }, 
                    icon: 'üí¨', 
                    cost: 10 
                },
                { 
                    id: 3, 
                    name: '–°–¥–µ–ª–∞—Ç—å 2 —Ä–µ–ø–æ—Å—Ç–∞', 
                    description: '–°–¥–µ–ª–∞–π 2 —Ä–µ–ø–æ—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤',
                    reward: { type: 'stat', stat: 'intelligence', value: 8 }, 
                    icon: 'üîÑ', 
                    cost: 8 
                },
                { 
                    id: 4, 
                    name: '–ù–∞–π—Ç–∏ —Å–∫—Ä—ã—Ç—ã–π —Å–∏–º–≤–æ–ª', 
                    description: '–ù–∞–π–¥–∏ —Å–∫—Ä—ã—Ç—ã–π —Å–∏–º–≤–æ–ª üéØ –≤ –æ–¥–Ω–æ–º –∏–∑ –Ω–∞—à–∏—Ö –ø–æ—Å—Ç–æ–≤',
                    reward: { type: 'item', item: 'üï∂Ô∏è –û—á–∫–∏ —Å—Ç–∏–ª—è–≥–∏', rarity: 'rare' }, 
                    icon: 'üîç', 
                    cost: 15 
                },
                { 
                    id: 5, 
                    name: '–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞', 
                    description: '–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ',
                    reward: { type: 'item', item: 'üëë –ö–æ—Ä–æ–Ω–∞ –ª–∏–¥–µ—Ä–∞', rarity: 'legendary' }, 
                    icon: 'üëë', 
                    cost: 20 
                },
                { 
                    id: 6, 
                    name: '–ü–æ—Å—Ç–∞–≤–∏—Ç—å 10 –ª–∞–π–∫–æ–≤', 
                    description: '–ü–æ—Å—Ç–∞–≤—å 10 –ª–∞–π–∫–æ–≤ –ø–æ–¥ –ø–æ—Å—Ç–∞–º–∏ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å',
                    reward: { type: 'stat', stat: 'charisma', value: 25 }, 
                    icon: '‚ù§Ô∏è', 
                    cost: 12 
                },
                { 
                    id: 7, 
                    name: '–ù–∞–ø–∏—Å–∞—Ç—å 5 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤', 
                    description: '–ù–∞–ø–∏—à–∏ 5 —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤',
                    reward: { type: 'stat', stat: 'creativity', value: 30 }, 
                    icon: '‚úçÔ∏è', 
                    cost: 18 
                },
                { 
                    id: 8, 
                    name: '–°–¥–µ–ª–∞—Ç—å 5 —Ä–µ–ø–æ—Å—Ç–æ–≤', 
                    description: '–ü–æ–¥–µ–ª–∏—Å—å 5 –ø–æ—Å—Ç–∞–º–∏ —Å –¥—Ä—É–∑—å—è–º–∏',
                    reward: { type: 'item', item: 'üöÄ –†–∞–∫–µ—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏', rarity: 'rare' }, 
                    icon: 'üöÄ', 
                    cost: 25 
                }
            ],
            completedTasks: [],
            lastLogin: null,
            dailyBonusClaimed: false,
            version: '2.1'
        };

        // –û–ø—Ü–∏–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞
        const hairOptions = ['üíá', 'üë®', 'üë©', 'üë¥', 'üë∂', 'üë±', 'üßî', 'üßì', 'üôç', 'üôé'];
        const faceOptions = ['üòä', 'üòé', 'üòá', 'üòâ', 'üòç', 'üòè', 'üòé', 'ü§©', 'ü•≥', 'üôÇ'];
        const clothesOptions = ['üëï', 'üëî', 'üëó', 'üß•', 'ü•º', 'üëò', 'ü•ª', 'ü©≥', 'üß•', 'üß£'];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            const savedData = localStorage.getItem('avatarEvolutionData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                if (parsedData.version !== gameData.version) {
                    gameData = {...gameData, ...parsedData};
                } else {
                    gameData = parsedData;
                }
                checkDailyBonus();
                showMainScreen();
            } else {
                showAvatarCreator();
                renderCustomizationOptions();
            }
            updateUI();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VK Bridge
            initVKBridge();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VK Bridge
        function initVKBridge() {
            if (typeof VKBridge !== 'undefined') {
                VKBridge.send('VKWebAppInit');
                console.log('VK Bridge –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            } else {
                console.log('VK Bridge –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–∏–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–µ –≤–æ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ)');
            }
        }

        // ==================== –§–£–ù–ö–¶–ò–Ø: –†–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π ====================
        function showFriendsLeaderboard() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ VK Bridge
            if (typeof VKBridge === 'undefined') {
                showNotification('‚ÑπÔ∏è –†–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–æ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ', 'info');
                return;
            }

            showNotification('üë• –ó–∞–≥—Ä—É–∂–∞—é —Ä–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π...', 'info');

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º VK Bridge –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π
            VKBridge.send('VKWebAppGetFriends', {
                multi: false,
                sort: 'name'
            })
            .then(response => {
                if (response.success && response.friends && response.friends.length > 0) {
                    // –°–æ–∑–¥–∞—ë–º —Å–ª—É—á–∞–π–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è –¥—Ä—É–∑–µ–π
                    const friendsWithScores = response.friends.map(friend => ({
                        id: friend.id,
                        name: friend.first_name + ' ' + friend.last_name,
                        score: Math.floor(Math.random() * 1500) + 100 // –°–ª—É—á–∞–π–Ω—ã–µ –æ—á–∫–∏ –æ—Ç 100 –¥–æ 1600
                    }));

                    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –æ—á–∫–æ–≤
                    friendsWithScores.sort((a, b) => b.score - a.score);

                    // –ë–µ—Ä—ë–º —Ç–æ–ø-10
                    const top10 = friendsWithScores.slice(0, 10);

                    // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    let leaderboardHTML = `
                        <div style="background: white; border-radius: 15px; padding: 25px; max-width: 400px; margin: 50px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                            <h3 style="text-align: center; margin-bottom: 20px; color: #667eea;">üèÜ –¢–æ–ø –¥—Ä—É–∑–µ–π</h3>
                            <div style="max-height: 400px; overflow-y: auto;">
                    `;

                    top10.forEach((friend, index) => {
                        const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                        const medalColor = index === 0 ? '#ffd700' : index === 1 ? '#c0c0c0' : index === 2 ? '#cd7f32' : '#667eea';
                        
                        leaderboardHTML += `
                            <div style="display: flex; justify-content: space-between; padding: 12px; margin-bottom: 8px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid ${medalColor};">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 1.2em;">${medal}</span>
                                    <span style="font-weight: ${index < 3 ? 'bold' : 'normal'};">${index + 1}. ${friend.name}</span>
                                </div>
                                <span style="color: ${medalColor}; font-weight: bold;">${friend.score} –æ—á–∫–æ–≤</span>
                            </div>
                        `;
                    });

                    leaderboardHTML += `
                            </div>
                            <button class="button" onclick="document.getElementById('leaderboard-modal').remove()" style="width: 100%; margin-top: 20px;">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        </div>
                    `;

                    // –°–æ–∑–¥–∞—ë–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    const modal = document.createElement('div');
                    modal.id = 'leaderboard-modal';
                    modal.style = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 9999;';
                    modal.innerHTML = leaderboardHTML;
                    document.body.appendChild(modal);

                    showNotification('‚úÖ –†–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω!', 'success');
                } else {
                    showNotification('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–∑–µ–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.', 'warning');
                }
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ VK Bridge:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–π—Ç–∏–Ω–≥–∞', 'error');
            });
        }
        // ==================== –ö–û–ù–ï–¶ –§–£–ù–ö–¶–ò–ò ====================

        function showAvatarCreator() {
            document.getElementById('avatar-creator-screen').classList.remove('hidden');
            document.getElementById('main-game-screen').classList.add('hidden');
        }

        function showMainScreen() {
            document.getElementById('avatar-creator-screen').classList.add('hidden');
            document.getElementById('main-game-screen').classList.remove('hidden');
        }

        function renderCustomizationOptions() {
            const hairContainer = document.getElementById('hair-options');
            const faceContainer = document.getElementById('face-options');
            const clothesContainer = document.getElementById('clothes-options');

            hairOptions.forEach((hair, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn' + (index === 0 ? ' active' : '');
                btn.innerHTML = hair;
                btn.onclick = () => {
                    document.querySelectorAll('#hair-options .option-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameData.avatar.hair = hair;
                    updateAvatarPreview();
                };
                hairContainer.appendChild(btn);
            });

            faceOptions.forEach((face, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn' + (index === 0 ? ' active' : '');
                btn.innerHTML = face;
                btn.onclick = () => {
                    document.querySelectorAll('#face-options .option-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameData.avatar.face = face;
                    updateAvatarPreview();
                };
                faceContainer.appendChild(btn);
            });

            clothesOptions.forEach((clothes, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn' + (index === 0 ? ' active' : '');
                btn.innerHTML = clothes;
                btn.onclick = () => {
                    document.querySelectorAll('#clothes-options .option-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameData.avatar.clothes = clothes;
                    updateAvatarPreview();
                };
                clothesContainer.appendChild(btn);
            });
        }

        function randomizeAvatar() {
            gameData.avatar.hair = hairOptions[Math.floor(Math.random() * hairOptions.length)];
            gameData.avatar.face = faceOptions[Math.floor(Math.random() * faceOptions.length)];
            gameData.avatar.clothes = clothesOptions[Math.floor(Math.random() * clothesOptions.length)];
            
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('active'));
            
            updateAvatarPreview();
            showNotification('üé≤ –ê–≤–∞—Ç–∞—Ä —Å–ª—É—á–∞–π–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!', 'info');
        }

        function updateAvatarPreview() {
            document.getElementById('avatar-hair').textContent = gameData.avatar.hair;
            document.getElementById('avatar-face').textContent = gameData.avatar.face;
            document.getElementById('avatar-clothes').textContent = gameData.avatar.clothes;
        }

        function nextStep() {
            if (gameData.stats.energy === 0) {
                gameData.stats.energy = 100;
            }
            gameData.lastLogin = new Date().toISOString();
            gameData.dailyBonusClaimed = false;
            saveGameData();
            showMainScreen();
            showNotification('üéâ –ê–≤–∞—Ç–∞—Ä —Å–æ–∑–¥–∞–Ω! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!', 'success');
            
            setTimeout(() => {
                gameData.collection.push('üéÅ –°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫');
                gameData.stats.creativity += 5;
                gameData.stats.charisma += 5;
                gameData.stats.intelligence += 5;
                saveGameData();
                updateUI();
                showNotification('üéÅ –ü–æ–ª—É—á–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫! +5 –∫–æ –≤—Å–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º!', 'success');
            }, 1000);
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('[id$="-tab"]').forEach(tab => tab.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            if (tabName === 'tasks') {
                renderTasks();
            } else if (tabName === 'collection') {
                renderCollection();
            } else if (tabName === 'stats') {
                updateUI();
            }
        }

        function renderTasks() {
            const container = document.getElementById('tasks-container');
            container.innerHTML = '';
            
            const availableTasks = gameData.tasks.filter(task => !gameData.completedTasks.includes(task.id));
            
            if (availableTasks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üéâ</div>
                        <h3>–í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</h3>
                        <p>–ù–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –∑–∞–≤—Ç—Ä–∞ –∏–ª–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä—ã</p>
                        <button class="button" onclick="resetTasks()" style="margin-top: 20px;">
                            <span>üîÑ</span> –°–±—Ä–æ—Å–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è
                        </button>
                    </div>
                `;
                return;
            }
            
            availableTasks.forEach(task => {
                if (gameData.stats.energy >= task.cost) {
                    const taskCard = document.createElement('div');
                    taskCard.className = 'task-card';
                    taskCard.id = 'task-' + task.id;
                    taskCard.innerHTML = `
                        <div class="task-title">
                            <span>${task.icon}</span>
                            <span>${task.name}</span>
                        </div>
                        <div class="task-description">${task.description}</div>
                        <div class="task-reward">
                            ${task.reward.type === 'stat' 
                                ? `+${task.reward.value} –∫ ${getStatName(task.reward.stat)}` 
                                : `üéÅ ${task.reward.item}`}
                        </div>
                        <div style="margin-top: 8px; font-size: 0.85em; color: #999;">
                            üí° –¢—Ä–µ–±—É–µ—Ç: ${task.cost} —ç–Ω–µ—Ä–≥–∏–∏
                        </div>
                        <div class="task-confirm">
                            <input type="checkbox" id="confirm-${task.id}" onchange="toggleTaskButton(${task.id})">
                            <label for="confirm-${task.id}">–Ø –≤—ã–ø–æ–ª–Ω–∏–ª(–∞) —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ</label>
                        </div>
                        <button class="button task-button" id="btn-${task.id}" onclick="completeTask(${task.id})" disabled>
                            <span>üéÅ</span> –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É
                        </button>
                    `;
                    container.appendChild(taskCard);
                }
            });
            
            if (container.children.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ö°</div>
                        <h3>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏</h3>
                        <p>–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</p>
                        <button class="button secondary" onclick="switchTab('stats')" style="margin-top: 20px;">
                            <span>üìä</span> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                        </button>
                    </div>
                `;
            }
        }

        function toggleTaskButton(taskId) {
            const checkbox = document.getElementById('confirm-' + taskId);
            const button = document.getElementById('btn-' + taskId);
            
            if (checkbox && button) {
                button.disabled = !checkbox.checked;
            }
        }

        function getStatName(stat) {
            const names = {
                creativity: '–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏',
                charisma: '—Ö–∞—Ä–∏–∑–º–µ',
                intelligence: '–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É',
                energy: '—ç–Ω–µ—Ä–≥–∏–∏'
            };
            return names[stat] || stat;
        }

        function completeTask(taskId) {
            const task = gameData.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            if (gameData.stats.energy < task.cost) {
                showNotification('‚ö° –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }
            
            const checkbox = document.getElementById('confirm-' + taskId);
            if (!checkbox || !checkbox.checked) {
                showNotification('‚ö†Ô∏è –û—Ç–º–µ—Ç—å—Ç–µ —á–µ–∫–±–æ–∫—Å "–Ø –≤—ã–ø–æ–ª–Ω–∏–ª!"', 'warning');
                return;
            }
            
            if (task.reward.type === 'stat') {
                gameData.stats[task.reward.stat] += task.reward.value;
                showNotification(`‚úÖ –û—Ç–ª–∏—á–Ω–æ! +${task.reward.value} –∫ ${getStatName(task.reward.stat)}`, 'success');
            } else if (task.reward.type === 'item') {
                gameData.collection.push(task.reward.item);
                const rarityText = task.reward.rarity === 'legendary' ? '–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π' : 
                                   task.reward.rarity === 'rare' ? '—Ä–µ–¥–∫–∏–π' : '–æ–±—ã—á–Ω—ã–π';
                showNotification(`‚úÖ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ü–æ–ª—É—á–µ–Ω ${rarityText} –ø—Ä–µ–¥–º–µ—Ç: ${task.reward.item}`, 'success');
            }
            
            gameData.completedTasks.push(taskId);
            gameData.stats.energy = Math.max(0, gameData.stats.energy - task.cost);
            
            saveGameData();
            updateUI();
            renderTasks();
            
            setTimeout(() => {
                if (gameData.stats.energy < 100) {
                    gameData.stats.energy = Math.min(100, gameData.stats.energy + 5);
                    saveGameData();
                    updateUI();
                }
            }, 300000);
        }

        function resetTasks() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–Ω–æ–≤–∞.')) {
                gameData.completedTasks = [];
                saveGameData();
                renderTasks();
                showNotification('üîÑ –ó–∞–¥–∞–Ω–∏—è —Å–±—Ä–æ—à–µ–Ω—ã!', 'info');
            }
        }

        function renderCollection() {
            const container = document.getElementById('collection-grid');
            container.innerHTML = '';
            
            if (gameData.collection.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="grid-column: span 4;">
                        <div class="empty-state-icon">üì≠</div>
                        <h3>–ö–æ–ª–ª–µ–∫—Ü–∏—è –ø—É—Å—Ç–∞</h3>
                        <p>–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã!</p>
                        <button class="button" onclick="switchTab('tasks')" style="margin-top: 20px;">
                            <span>üéØ</span> –ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–¥–∞–Ω–∏—è–º
                        </button>
                    </div>
                `;
                return;
            }
            
            gameData.collection.forEach((item, index) => {
                const itemElement = document.createElement('div');
                let rarityClass = '';
                
                if (item.includes('–ö–æ—Ä–æ–Ω–∞') || item.includes('–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π')) {
                    rarityClass = 'legendary';
                } else if (item.includes('–û—á–∫–∏') || item.includes('–†–∞–∫–µ—Ç–∞') || item.includes('—Ä–µ–¥–∫–∏–π')) {
                    rarityClass = 'rare';
                }
                
                itemElement.className = 'collection-item ' + rarityClass;
                itemElement.innerHTML = `
                    <div class="collection-item-icon">${item.split(' ')[0]}</div>
                    <div class="collection-item-name">${item.split(' ').slice(1).join(' ') || item}</div>
                `;
                container.appendChild(itemElement);
            });
        }

        function checkDailyBonus() {
            const today = new Date().toDateString();
            const lastLogin = gameData.lastLogin ? new Date(gameData.lastLogin).toDateString() : null;
            
            const dailyBonusElement = document.getElementById('daily-bonus');
            
            if (lastLogin !== today) {
                gameData.dailyBonusClaimed = false;
                dailyBonusElement.style.display = 'block';
            } else {
                dailyBonusElement.style.display = gameData.dailyBonusClaimed ? 'none' : 'block';
            }
        }

        function claimDailyBonus() {
            if (gameData.dailyBonusClaimed) {
                showNotification('üéÅ –ë–æ–Ω—É—Å —É–∂–µ –ø–æ–ª—É—á–µ–Ω —Å–µ–≥–æ–¥–Ω—è!', 'warning');
                return;
            }
            
            const bonusItems = [
                'üéâ –≠–º–æ—Ü–∏—è: —Ç–∞–Ω–µ—Ü',
                '‚ú® –≠—Ñ—Ñ–µ–∫—Ç: —Å–≤–µ—á–µ–Ω–∏–µ',
                'üëë –†–µ–¥–∫–∞—è —à–ª—è–ø–∞',
                'üíé –ö—Ä–∏—Å—Ç–∞–ª–ª —É–¥–∞—á–∏',
                'üåü –ó–≤–µ–∑–¥–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è',
                'üåà –†–∞–¥—É–∂–Ω—ã–π —Ñ–æ–Ω',
                'üî• –û–≥–æ–Ω—å —Å—Ç—Ä–∞—Å—Ç–µ–π',
                '‚ùÑÔ∏è –õ–µ–¥—è–Ω–∞—è –∫–æ—Ä–æ–Ω–∞'
            ];
            const randomItem = bonusItems[Math.floor(Math.random() * bonusItems.length)];
            
            let rarity = '';
            if (randomItem.includes('–ö–æ—Ä–æ–Ω–∞') || randomItem.includes('–ó–≤–µ–∑–¥–∞')) {
                rarity = 'legendary';
            } else if (randomItem.includes('–≠—Ñ—Ñ–µ–∫—Ç') || randomItem.includes('–ö—Ä–∏—Å—Ç–∞–ª–ª')) {
                rarity = 'rare';
            }
            
            gameData.collection.push(randomItem);
            gameData.stats.energy = 100;
            gameData.dailyBonusClaimed = true;
            gameData.lastLogin = new Date().toISOString();
            
            const rarityText = rarity === 'legendary' ? '–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π' : 
                               rarity === 'rare' ? '—Ä–µ–¥–∫–∏–π' : '—É–Ω–∏–∫–∞–ª—å–Ω—ã–π';
            
            showNotification(`üéÅ –ü–æ–ª—É—á–µ–Ω –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å: ${rarityText} –ø—Ä–µ–¥–º–µ—Ç "${randomItem}"! –≠–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!`, 'success');
            saveGameData();
            updateUI();
            document.getElementById('daily-bonus').style.display = 'none';
        }

        function inviteFriends() {
            showNotification('üë• –û—Ç–ø—Ä–∞–≤–ª—è—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑—å—è–º...', 'info');
            
            setTimeout(() => {
                const friendsCount = Math.floor(Math.random() * 3) + 1;
                gameData.stats.charisma += friendsCount * 10;
                
                if (friendsCount > 0) {
                    gameData.collection.push('üíå –ü–∏—Å—å–º–æ –¥—Ä—É–∂–±—ã');
                    showNotification(`‚úÖ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ ${friendsCount} –¥—Ä—É–∑–µ–π! +${friendsCount * 10} –∫ —Ö–∞—Ä–∏–∑–º–µ –∏ –ø–æ–ª—É—á–µ–Ω–æ –ø–∏—Å—å–º–æ –¥—Ä—É–∂–±—ã!`, 'success');
                } else {
                    showNotification('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è', 'warning');
                }
                
                saveGameData();
                updateUI();
            }, 1500);
        }

        function findPartner() {
            showNotification('üîç –ò—â—É –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤...', 'info');
            
            setTimeout(() => {
                const partners = ['–ê–ª–µ–∫—Å–µ–π', '–ú–∞—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ê–Ω–Ω–∞', '–°–µ—Ä–≥–µ–π', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞', '–ò–≤–∞–Ω', '–û–ª—å–≥–∞'];
                const randomPartner = partners[Math.floor(Math.random() * partners.length)];
                
                if (Math.random() < 0.3) {
                    showNotification('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ!', 'warning');
                    return;
                }
                
                showNotification(`‚úÖ –ù–∞–π–¥–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä: ${randomPartner}! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è.`, 'success');
                
                gameData.stats.creativity += 10;
                gameData.collection.push('ü§ù –ó–Ω–∞–∫ –¥—Ä—É–∂–±—ã');
                saveGameData();
                updateUI();
            }, 2000);
        }

        function updateUI() {
            document.getElementById('creativity-value').textContent = gameData.stats.creativity;
            document.getElementById('charisma-value').textContent = gameData.stats.charisma;
            document.getElementById('intelligence-value').textContent = gameData.stats.intelligence;
            document.getElementById('energy-value').textContent = gameData.stats.energy;
            
            document.getElementById('creativity-progress').style.width = `${Math.min(100, gameData.stats.creativity)}%`;
            document.getElementById('charisma-progress').style.width = `${Math.min(100, gameData.stats.charisma)}%`;
            document.getElementById('intelligence-progress').style.width = `${Math.min(100, gameData.stats.intelligence)}%`;
            document.getElementById('energy-progress').style.width = `${gameData.stats.energy}%`;
            
            checkDailyBonus();
        }

        function saveGameData() {
            localStorage.setItem('avatarEvolutionData', JSON.stringify(gameData));
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.innerHTML = `
                <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        setInterval(() => {
            if (gameData.stats.energy < 100 && gameData.lastLogin) {
                gameData.stats.energy = Math.min(100, gameData.stats.energy + 1);
                saveGameData();
                updateUI();
            }
        }, 300000);

        window.onload = initGame;
    </script>
</body>
</html>
